var menu=document.querySelector(".page-header__menu"),menu__button=document.querySelector(".page-header__menu-button"),contest=document.querySelector(".contest");if(menu&&menu__button&&(menu.classList.remove("page-header__menu--opened"),menu__button.classList.remove("page-header__menu-button--close-menu"),menu__button.addEventListener("click",function(e){var t=document.querySelector(".page-header__menu--opened");e.preventDefault(),t?(menu.classList.remove("page-header__menu--opened"),menu__button.classList.remove("page-header__menu-button--close-menu")):(menu.classList.add("page-header__menu--opened"),menu__button.classList.add("page-header__menu-button--close-menu"))})),contest){var contestSurname=contest.querySelector("#surname"),contestName=contest.querySelector("#name"),contestEmail=contest.querySelector("#email"),contestSubmit=contest.querySelector("#submit"),modal=document.querySelectorAll(".page-modal"),modalSuccess=document.querySelector(".page-modal--success"),modalFailure=document.querySelector(".page-modal--failure"),modalButton=document.querySelectorAll(".page-modal__button");function modalClose(e){for(e.preventDefault(),i=0;i<modal.length;i++)modal[i].classList.remove("page-modal--visible")}for(i=0;i<modalButton.length;i++)modalButton[i].addEventListener("click",modalClose);contestSubmit.addEventListener("click",function(e){contestSurname.value&&contestName.value&&contestEmail.value?(e.preventDefault(),modalSuccess.classList.add("page-modal--visible")):modalFailure.classList.add("page-modal--visible")})}!function(){var e=document.querySelector(".page-header"),t=document.querySelector(".reviews__before"),n=document.querySelector(".reviews__after"),o=document.getElementById("slide1"),a=document.getElementById("slide2"),l=document.getElementById("slide3");e&&(t.addEventListener("click",function(e){e.preventDefault(),"block"===window.getComputedStyle(o).display?(o.style.display="none",a.style.display="none",l.style.display="block"):"block"===window.getComputedStyle(a).display?(a.style.display="none",o.style.display="block",l.style.display="none"):"block"===window.getComputedStyle(l).display&&(l.style.display="none",a.style.display="block",o.style.display="none")}),n.addEventListener("click",function(e){e.preventDefault(),"block"===window.getComputedStyle(o).display?(o.style.display="none",a.style.display="block",l.style.display="none"):"block"===window.getComputedStyle(a).display?(a.style.display="none",o.style.display="none",l.style.display="block"):"block"===window.getComputedStyle(l).display&&(l.style.display="none",a.style.display="none",o.style.display="block")}))}();var mapElement=document.getElementById("map");if(mapElement){var map="";google.maps.event.addDomListener(window,"load",init),google.maps.event.addDomListener(window,"resize",m_res);function init(){var e={zoom:15,mapTypeControl:!1,zoomControl:!0,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:!1,center:new google.maps.LatLng(59.936287,30.321047)};mapElement.classList.add("contacts-map--map-loaded"),map=new google.maps.Map(mapElement,e);var t={url:"img/icon-map-marker.svg",size:new google.maps.Size(36,36),scaledSize:new google.maps.Size(36,36),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(18,18)};new google.maps.Marker({position:new google.maps.LatLng(59.936287,30.321047),map:map,optimized:!1,icon:t}),m_res()}function m_res(){google.maps.event.trigger(map,"resize"),map.panTo(new google.maps.LatLng(59.936287,30.321047))}}!function(){var e=document.querySelector(".burg-icon"),t=document.querySelector(".burg-icon__open"),n=document.querySelector(".burg-icon__close--hidden"),o=document.querySelector(".main-header__nav-old"),a=document.querySelector(".main-nav");e.addEventListener("tap",function(e){e.preventDefault(),t.classList.toggle("burg-icon__open--hidden"),n.classList.toggle("burg-icon__close"),o.classList.toggle("main-header__nav-old--menu-visible"),a.classList.toggle("main-nav--visible")})}(),function(){for(var e=document.querySelectorAll(".number-range"),t=0;t<e.length;t++)!function(e){function t(e){var t=Number(n.value);isNaN(t)&&(t=1),n.value=e?t+1:t<2?1:t-1}var n=e.querySelector("input"),o=e.querySelector(".number-range__minus"),a=e.querySelector(".number-range__plus");o.addEventListener("tap",function(){t(!1)}),a.addEventListener("tap",function(){t(!0)})}(e[t])}(),function(){var e=document.querySelector(".form__travs-old"),t=document.querySelector("#number-of-travs-field"),n=e.querySelector(".number-range__minus"),o=e.querySelector(".number-range__plus"),a=document.querySelector("#trav-template").innerHTML;o.addEventListener("tap",function(n){var o=Mustache.render(a,{number:t.value}),l=document.createElement("div");l.classList.add("form__trav-item"),l.innerHTML=o,e.appendChild(l),l.querySelector(".form__trav-delete").addEventListener("tap",function(e){e.preventDefault(),l.parentNode.removeChild(l),t.value=t.value-1})}),n.addEventListener("tap",function(n){var o=e.querySelectorAll(".form__trav-item");if(o.length>1){var a=o[t.value];a.parentNode.removeChild(a)}})}(),function(){function e(e,t){var n=new XMLHttpRequest,o=(new Date).getTime();n.open("post","https://echo.htmlacademy.ru/adaptive?"+o),n.addEventListener("readystatechange",function(){4==n.readyState&&t(n.responseText)}),n.send(e)}function t(e){if(e.type.match(/image.*/)){var t=new FileReader;t.addEventListener("load",function(t){var o=Mustache.render(l,{image:t.target.result,name:e.name}),i=document.createElement("div");i.classList.add("input-file__photo"),i.innerHTML=o,a.appendChild(i),i.querySelector(".input-file__delete").addEventListener("tap",function(e){e.preventDefault(),n(i)}),r.push({file:e,div:i})}),t.readAsDataURL(e)}}function n(e){r=r.filter(function(t){return t.div!=e}),e.parentNode.removeChild(e)}if("FormData"in window&&"FileReader"in window){var o=document.querySelector(".form"),a=document.querySelector(".input-file__photos"),l=document.querySelector("#image-template").innerHTML,r=[];o.addEventListener("submit",function(t){t.preventDefault();var n=new FormData(o);r.forEach(function(e){n.append("images",e.file)}),e(n,function(e){console.log(e)})}),o.querySelector("#upload-photo").addEventListener("change",function(){for(var e=this.files,n=0;n<e.length;n++)t(e[n]);this.value=""})}}(),function(){var e=document.querySelector(".form__date-field"),t=e.querySelector("#departure-date-field"),n=e.querySelector("#trip-duration-field"),o=e.querySelector("#return-date-field"),a=e.querySelector(".number-range__minus"),l=e.querySelector(".number-range__plus");t.value=moment().format("YYYY-MM-DD"),a.addEventListener("tap",function(e){o.value=moment(t.value).add(n.value,"days").format("YYYY-MM-DD")}),l.addEventListener("tap",function(e){o.value=moment(t.value).add(n.value,"days").format("YYYY-MM-DD")})}();